import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';

export interface Translations {
  [key: string]: string;
}

export interface Language {
  code: string;
  name: string;
  flag: string;
}
@Injectable({
  providedIn: 'root'
})
export class LanguageService {
  private currentLanguageSubject = new BehaviorSubject<string>('es');
  public currentLanguage$ = this.currentLanguageSubject.asObservable();

  public availableLanguages: Language[] = [
    { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
    { code: 'en', name: 'English', flag: 'üá∫üá∏' },
    { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },
    { code: 'de', name: 'Deutsch', flag: 'üá©üá™' }
  ];

  private translations: { [lang: string]: Translations } = {
    es: {
      'nav.home': 'Inicio',
      'nav.about': 'Acerca de',
      'nav.skills': 'Habilidades',
      'nav.projects': 'Proyectos',
      'nav.contact': 'Contacto',
      
      'hero.greeting': 'Hola, soy',
      'hero.title': 'Desarrollador Full-Stack Junior',
      'hero.description': 'Apasionado por crear experiencias web incre√≠bles con tecnolog√≠as modernas. Actualmente buscando oportunidades de pr√°cticas para crecer y contribuir a proyectos innovadores.',
      'hero.viewWork': 'Ver Mi Trabajo',
      'hero.getInTouch': 'Cont√°ctame',
      
      'about.title': 'Acerca de M√≠',
      'about.description1': 'Soy un desarrollador full-stack junior apasionado con experiencia en tecnolog√≠as web modernas. Actualmente busco oportunidades para aplicar mis habilidades en proyectos del mundo real y continuar aprendiendo en un entorno colaborativo.',
      'about.description2': 'Mi viaje en el desarrollo web comenz√≥ con curiosidad sobre c√≥mo funcionan los sitios web, y ha evolucionado hacia una profunda apreciaci√≥n tanto del desarrollo frontend como backend. Disfruto resolviendo problemas complejos y creando aplicaciones f√°ciles de usar.',
      'about.projectsCompleted': 'Proyectos Completados',
      'about.technologiesMastered': 'Tecnolog√≠as Dominadas',
      'about.yearsLearning': 'A√±os Aprendiendo',
      
      'skills.title': 'Habilidades T√©cnicas',
      'skills.frontend': 'Frontend',
      'skills.backend': 'Backend',
      
      'projects.title': 'Proyectos Destacados',
      'projects.hospital.title': 'Sistema de gesti√≥n de citas m√©dicas',
      'projects.hospital.description': 'Sistema de gesti√≥n de citas m√©dicas con autenticaci√≥n de usuarios, registro de horarios e integraci√≥n de pagos.',
      'projects.poglotech.title': 'App de Gesti√≥n de inventario para la venta y gesti√≥n de repuestos de laptops',
      'projects.poglotech.description': 'Aplicaci√≥n web responsiva para la gesti√≥n de inventario y ventas de repuestos de laptops, con funcionalidades de b√∫squeda y filtrado.',
      'projects.weather.title': 'Dashboard del Clima',
      'projects.weather.description': 'Aplicaci√≥n de clima en tiempo real con pron√≥sticos basados en ubicaci√≥n y gr√°ficos interactivos.',
      'projects.blog.title': 'CMS de Blog',
      'projects.blog.description': 'Sistema de gesti√≥n de contenido para bloggers con editor de texto enriquecido y optimizaci√≥n SEO.',
      'projects.liveDemo': 'Demo en Vivo',
      'projects.github': 'GitHub',
      
      'contact.title': 'Ponte en Contacto',
      'contact.subtitle': 'Conectemos',
      'contact.description': 'Siempre estoy abierto a discutir nuevas oportunidades y proyectos emocionantes.',
      'contact.email': 'juandiego.gr05@email.com',
      'contact.phone': '+51 960 662 079',
      'contact.location': 'Lima, PE',
      'contact.form.name': 'Tu Nombre',
      'contact.form.email': 'Tu Email',
      'contact.form.message': 'Tu Mensaje',
      'contact.form.send': 'Enviar Mensaje',
      'contact.form.success': '¬°Gracias por tu mensaje! Te responder√© pronto.',
      'contact.form.error': 'Por favor, completa todos los campos del formulario.',
      'contact.form.error.email': 'Por favor, ingresa un correo electr√≥nico v√°lido',
      'footer.rights': 'Todos los derechos reservados.'
    },
    en: {
      'nav.home': 'Home',
      'nav.about': 'About',
      'nav.skills': 'Skills',
      'nav.projects': 'Projects',
      'nav.contact': 'Contact',
      
      'hero.greeting': 'Hi, I\'m',
      'hero.title': 'Junior Full-Stack Developer',
      'hero.description': 'Passionate about creating amazing web experiences with modern technologies. Currently seeking internship opportunities to grow and contribute to innovative projects.',
      'hero.viewWork': 'View My Work',
      'hero.getInTouch': 'Get In Touch',
      
      'about.title': 'About Me',
      'about.description1': 'I\'m a passionate junior full-stack developer with experience in modern web technologies. Currently pursuing opportunities to apply my skills in real-world projects and continue learning in a collaborative environment.',
      'about.description2': 'My journey in web development started with curiosity about how websites work, and has evolved into a deep appreciation for both frontend and backend development. I enjoy solving complex problems and creating user-friendly applications.',
      'about.projectsCompleted': 'Projects Completed',
      'about.technologiesMastered': 'Technologies Mastered',
      'about.yearsLearning': 'Years Learning',
      
      'skills.title': 'Technical Skills',
      'skills.frontend': 'Frontend',
      'skills.backend': 'Backend',
      
      'projects.title': 'Featured Projects',
      'projects.hospital.title': 'Medical appointment management system',
      'projects.hospital.description': 'Medical appointment management system with user authentication, time registration and payment integration.',
      'projects.poglotech.title': 'Inventory management app for the sale and management of laptop spare parts',
      'projects.poglotech.description': 'Responsive web application for inventory management and sales of laptop parts, with search and filtering functionalities.',
      'projects.weather.title': 'Weather Dashboard',
      'projects.weather.description': 'Real-time weather application with location-based forecasts and interactive charts.',
      'projects.blog.title': 'Blog CMS',
      'projects.blog.description': 'Content management system for bloggers with rich text editor and SEO optimization.',
      'projects.liveDemo': 'Live Demo',
      'projects.github': 'GitHub',
      
      'contact.title': 'Get In Touch',
      'contact.subtitle': 'Let\'s Connect',
      'contact.description': 'I\'m always open to discussing new opportunities and exciting projects.',
      'contact.email': 'juandiego.gr05@email.com',
      'contact.phone': '+51 960 662 079',
      'contact.location': 'Lima, PE',
      'contact.form.name': 'Your Name',
      'contact.form.email': 'Your Email',
      'contact.form.message': 'Your Message',
      'contact.form.send': 'Send Message',
      'contact.form.success': 'Thank you for your message! I\'ll get back to you soon.',
      'contact.form.error': 'Please fill out all fields in the form.',
      'contact.form.error.email': 'Please enter a valid email address',
      'footer.rights': 'All rights reserved.'
    },
    fr: {
      'nav.home': 'Accueil',
      'nav.about': '√Ä propos',
      'nav.skills': 'Comp√©tences',
      'nav.projects': 'Projets',
      'nav.contact': 'Contact',
      
      'hero.greeting': 'Salut, je suis',
      'hero.title': 'D√©veloppeur Full-Stack Junior',
      'hero.description': 'Passionn√© par la cr√©ation d\'exp√©riences web incroyables avec des technologies modernes. Actuellement √† la recherche d\'opportunit√©s de stage pour grandir et contribuer √† des projets innovants.',
      'hero.viewWork': 'Voir Mon Travail',
      'hero.getInTouch': 'Me Contacter',
      
      'about.title': '√Ä Propos de Moi',
      'about.description1': 'Je suis un d√©veloppeur full-stack junior passionn√© avec de l\'exp√©rience dans les technologies web modernes. Je recherche actuellement des opportunit√©s pour appliquer mes comp√©tences dans des projets r√©els et continuer √† apprendre dans un environnement collaboratif.',
      'about.description2': 'Mon parcours dans le d√©veloppement web a commenc√© par la curiosit√© de savoir comment fonctionnent les sites web, et a √©volu√© vers une profonde appr√©ciation du d√©veloppement frontend et backend. J\'aime r√©soudre des probl√®mes complexes et cr√©er des applications conviviales.',
      'about.projectsCompleted': 'Projets Termin√©s',
      'about.technologiesMastered': 'Technologies Ma√Ætris√©es',
      'about.yearsLearning': 'Ann√©es d\'Apprentissage',
      
      'skills.title': 'Comp√©tences Techniques',
      'skills.frontend': 'Frontend',
      'skills.backend': 'Backend',
      
      'projects.title': 'Projets en Vedette',
      'projects.hospital.title': 'Syst√®me de gestion des rendez-vous m√©dicaux',
      'projects.hospital.description': 'Syst√®me de gestion des rendez-vous m√©dicaux avec authentification des utilisateurs, enregistrement des horaires et int√©gration des paiements.',
      'projects.poglotech.title': 'App de gestion d\'inventaire pour la vente et la gestion de pi√®ces d√©tach√©es d\'ordinateurs portables',
      'projects.poglotech.description': 'Application web responsive pour la gestion d\'inventaire et la vente de pi√®ces d√©tach√©es d\'ordinateurs portables, avec des fonctionnalit√©s de recherche et de filtrage.',
      'projects.github': 'GitHub',
      
      'contact.title': 'Entrer en Contact',
      'contact.subtitle': 'Connectons-nous',
      'contact.description': 'Je suis toujours ouvert √† discuter de nouvelles opportunit√©s et de projets passionnants.',
      'contact.email': 'juandiego.gr05@email.com',
      'contact.phone': '+51 960 662 079',
      'contact.location': 'Lima, PE',
      'contact.form.name': 'Votre Nom',
      'contact.form.email': 'Votre Email',
      'contact.form.message': 'Votre Message',
      'contact.form.send': 'Envoyer le Message',
      'contact.form.success': 'Merci pour votre message ! Je vous r√©pondrai bient√¥t.',
      'contact.form.error': 'Veuillez remplir tous les champs du formulaire.',
      'contact.form.error.email': 'Veuillez entrer une adresse email valide',
      'footer.rights': 'Tous droits r√©serv√©s.'
    },
    de: {
      'nav.home': 'Startseite',
      'nav.about': '√úber mich',
      'nav.skills': 'F√§higkeiten',
      'nav.projects': 'Projekte',
      'nav.contact': 'Kontakt',
      
      'hero.greeting': 'Hallo, ich bin',
      'hero.title': 'Junior Full-Stack Entwickler',
      'hero.description': 'Leidenschaftlich daran interessiert, erstaunliche Web-Erfahrungen mit modernen Technologien zu schaffen. Derzeit auf der Suche nach Praktikumsm√∂glichkeiten, um zu wachsen und zu innovativen Projekten beizutragen.',
      'hero.viewWork': 'Meine Arbeit Ansehen',
      'hero.getInTouch': 'Kontakt Aufnehmen',
      
      'about.title': '√úber Mich',
      'about.description1': 'Ich bin ein leidenschaftlicher Junior Full-Stack-Entwickler mit Erfahrung in modernen Web-Technologien. Derzeit suche ich nach M√∂glichkeiten, meine F√§higkeiten in realen Projekten anzuwenden und in einer kollaborativen Umgebung weiter zu lernen.',
      'about.description2': 'Meine Reise in der Webentwicklung begann mit der Neugier darauf, wie Websites funktionieren, und hat sich zu einer tiefen Wertsch√§tzung sowohl f√ºr Frontend- als auch Backend-Entwicklung entwickelt. Ich l√∂se gerne komplexe Probleme und erstelle benutzerfreundliche Anwendungen.',
      'about.projectsCompleted': 'Abgeschlossene Projekte',
      'about.technologiesMastered': 'Beherrschte Technologien',
      'about.yearsLearning': 'Jahre des Lernens',
      
      'skills.title': 'Technische F√§higkeiten',
      'skills.frontend': 'Frontend',
      'skills.backend': 'Backend',
      
      'projects.title': 'Ausgew√§hlte Projekte',
      'projects.hospital.title': 'Medizinisches Terminverwaltungssystem',
      'projects.hospital.description': 'Medizinisches Terminverwaltungssystem mit Benutzerauthentifizierung, Zeitregistrierung und Zahlungsintegration.',
      'projects.poglotech.title': 'Inventarverwaltungs-App f√ºr den Verkauf und die Verwaltung von Laptop-Ersatzteilen',
      'projects.poglotech.description': 'Responsive Webanwendung f√ºr Inventarverwaltung und Verkauf von Laptop-Teilen, mit Such- und Filterfunktionen.',
      'projects.github': 'GitHub',
      
      'contact.title': 'Kontakt Aufnehmen',
      'contact.subtitle': 'Lass uns Verbinden',
      'contact.description': 'Ich bin immer offen f√ºr Diskussionen √ºber neue M√∂glichkeiten und aufregende Projekte.',
      'contact.email': 'juandiego.gr05@email.com',
      'contact.phone': '+51 960 662 079',
      'contact.location': 'Lima, PE',
      'contact.form.name': 'Ihr Name',
      'contact.form.email': 'Ihre E-Mail',
      'contact.form.message': 'Ihre Nachricht',
      'contact.form.send': 'Nachricht Senden',
      'contact.form.success': 'Vielen Dank f√ºr Ihre Nachricht! Ich werde Ihnen bald antworten.',
      'contact.form.error': 'Bitte f√ºllen Sie alle Felder des Formulars aus.',
      'contact.form.error.email': 'Bitte geben Sie eine g√ºltige E-Mail-Adresse ein',
      'footer.rights': 'Alle Rechte vorbehalten.'
    }
  };

  constructor() {
    const savedLang = localStorage.getItem('language') || 'es';
    this.currentLanguageSubject.next(savedLang);
  }

  getCurrentLanguage(): string {
    return this.currentLanguageSubject.value;
  }

  setLanguage(lang: string): void {
    this.currentLanguageSubject.next(lang);
    localStorage.setItem('language', lang);
  }

  translate(key: string): string {
    const currentLang = this.getCurrentLanguage();
    return this.translations[currentLang]?.[key] || key;
  }

  getLanguageName(code: string): string {
    const language = this.availableLanguages.find(lang => lang.code === code);
    return language ? language.name : code;
  }

  getLanguageFlag(code: string): string {
    const language = this.availableLanguages.find(lang => lang.code === code);
    return language ? language.flag : '';
  }
}